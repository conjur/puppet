@startuml

hide footbox

participant "Puppet Master" as Master
participant "Puppet Agent" as Agent
participant Conjur

Agent->Agent: Gather Facts
Agent->Conjur: Authenticate (with API Key)
Conjur->Agent: Auth Token
Agent->Master: Facts (including auth token) 
Master->Conjur: Request Secrets (with Auth Token)
Conjur->Conjur: Authorize
Conjur->Master: Secrets
Master->Master: Update Catalog
Master->Agent: Send Catalog
Agent->Agent: Update Config Based on Catalog

@enduml
